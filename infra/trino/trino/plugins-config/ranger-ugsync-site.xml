<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration xmlns:xi="http://www.w3.org/2001/XInclude">
  <!-- 1. Enable UserSync -->
  <property>
    <name>ranger.usersync.enabled</name>
    <value>true</value>
  </property>

  <property>
    <name>ranger.usersync.source.impl.class</name>
    <value>org.apache.ranger.ldapusersync.process.LdapUserGroupBuilder</value>
  </property>

  <property>
    <name>ranger.usersync.group.searchenabled</name>
    <value>true</value>
  </property>

  <property>
    <name>ranger.usersync.minUnixUserIdToSync</name>
    <value>0</value>
  </property>

  
  <property>
    <name>ranger.usersync.sleeptimeinmillisbetweensynccycle</name>
    <value>5000</value>
  </property>

  
  <property>
    <name>ranger.usersync.sync.source</name>
    <value>ldap</value>
  </property>
  
  <property>
    <name>ranger.usersync.ldap.binddn</name>
    <value>cn=admin,dc=openldap</value>
  </property>
  <property>
    <name>ranger.usersync.ldap.ldapbindpassword</name>
    <value>rangerR0cks!</value>
  </property>
  <property>
    <name>ranger.usersync.ldap.searchBase</name>
    <value>dc=openldap</value>
  </property>
  <property>
    <name>ranger.usersync.ldap.url</name>
    <value>ldaps://host.docker.internal:636</value>
  </property>

  <property>
    <name>ranger.usersync.ssl</name>
    <value>true</value>
  </property>
  <property>
    <name>ranger.usersync.ldap.referral</name>
    <value>never</value>
  </property>
  <property>
    <name>ranger.usersync.keystore.file</name>
    <value>/home/docker-certificates/keystore.jks</value>
  </property>
  <property>
    <name>ranger.usersync.truststore.file</name>
    <value>/home/docker-certificates/truststore.jks</value>
  </property>
  <property>
    <name>ranger.usersync.keystore.password</name>
    <value>UnIx529p</value>
  </property>
  <property>
    <name>ranger.usersync.truststore.password</name>
    <value>UnIx529p</value>
  </property>

  <property>
    <name>ranger.usersync.group.searchbase</name>
    <value>ou=group,dc=openldap</value>
  </property>
  <property>
    <name>ranger.usersync.group.searchfilter</name>
    <value>(!(cn=trino)(cn=ti))</value>
  </property>
  
  <property>
    <name>ranger.usersync.filesource.file</name>
    <value>/home/ranger/scripts/ugsync-file-source.csv</value>
  </property>
</configuration>